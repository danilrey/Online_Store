<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Analytics - Cases Store</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>Cases Store</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="/admin.html" id="admin-link" class="active">Admin</a></li>
                <li id="user-name-display" style="display: none; color: var(--dark-color); font-weight: 500;"></li>
                <li><a href="#" id="logout-link">Logout</a></li>
            </ul>
        </div>
    </nav>

    <section class="section">
        <div class="container">
            <h2>Admin Analytics</h2>

            <div class="card">
                <h3>Filters</h3>
                <div class="filters admin-filters">
                    <div class="filter-group">
                        <label for="admin-interval">Interval</label>
                        <select id="admin-interval" class="filter-select">
                            <option value="day">Daily</option>
                            <option value="month">Monthly</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="admin-metric">Metric</label>
                        <select id="admin-metric" class="filter-select">
                            <option value="revenue">Revenue</option>
                            <option value="orders">Orders</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>Summary</h3>
                <div id="admin-summary" class="stat-grid">
                    <div class="stat-card">
                        <div class="stat-label">Total Orders</div>
                        <div class="stat-value" id="summary-total-orders">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Revenue</div>
                        <div class="stat-value" id="summary-total-revenue">$0.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg Order</div>
                        <div class="stat-value" id="summary-avg-order">$0.00</div>
                    </div>
                </div>
            </div>

            <div class="admin-chart-grid">
                <div class="card">
                    <h3>Sales Over Time</h3>
                    <canvas id="chart-sales-timeseries" height="180"></canvas>
                </div>
                <div class="card">
                    <h3>Orders by Status</h3>
                    <canvas id="chart-order-status" height="180"></canvas>
                </div>
                <div class="card">
                    <h3>Top Products by Revenue</h3>
                    <canvas id="chart-top-products" height="180"></canvas>
                </div>
                <div class="card">
                    <h3>Total Sold by Category</h3>
                    <canvas id="chart-category-sold" height="180"></canvas>
                </div>
            </div>

            <div class="card">
                <h3>All Orders</h3>
                <div id="admin-orders" class="admin-list">
                    <div class="loading">Loading orders...</div>
                </div>
            </div>

            <div class="card">
                <h3>Products</h3>
                <form id="admin-product-form" class="admin-product-form">
                    <div class="admin-product-fields">
                        <label class="admin-field">
                            <span>Name</span>
                            <input class="filter-input" id="admin-product-name" required>
                        </label>
                        <label class="admin-field">
                            <span>Price</span>
                            <input class="filter-input" id="admin-product-price" type="number" step="0.01" min="0" required>
                        </label>
                        <label class="admin-field">
                            <span>Category</span>
                            <select class="filter-select" id="admin-product-category" required>
                                <option value="phone-case">Phone case</option>
                                <option value="laptop-case">Laptop case</option>
                                <option value="tablet-case">Tablet case</option>
                                <option value="watch-case">Watch case</option>
                                <option value="accessory">Accessory</option>
                            </select>
                        </label>
                        <label class="admin-field">
                            <span>Stock</span>
                            <input class="filter-input" id="admin-product-stock" type="number" min="0" value="0" required>
                        </label>
                        <label class="admin-field">
                            <span>Brand</span>
                            <input class="filter-input" id="admin-product-brand">
                        </label>
                        <label class="admin-field">
                            <span>Material</span>
                            <input class="filter-input" id="admin-product-material">
                        </label>
                        <label class="admin-field">
                            <span>Color</span>
                            <input class="filter-input" id="admin-product-color">
                        </label>
                        <label class="admin-field admin-field-wide">
                            <span>Description</span>
                            <textarea class="filter-input" id="admin-product-description" rows="3" required></textarea>
                        </label>
                        <label class="admin-field admin-field-wide">
                            <span>Tags (comma separated)</span>
                            <input class="filter-input" id="admin-product-tags" placeholder="tag1, tag2">
                        </label>
                        <label class="admin-field admin-field-wide">
                            <span>Image URLs (comma separated)</span>
                            <input class="filter-input" id="admin-product-images" placeholder="https://...">
                        </label>
                        <label class="admin-field admin-field-wide">
                            <span>Compatible models (JSON array)</span>
                            <textarea class="filter-input" id="admin-product-models" rows="3" placeholder='[{"brand":"Apple","model_name":"iPhone 15","release_year":2023}]'></textarea>
                        </label>
                        <label class="admin-field admin-field-checkbox">
                            <span>Active</span>
                            <input type="checkbox" id="admin-product-active" checked>
                        </label>
                    </div>
                    <div class="admin-row-actions">
                        <button type="submit" class="btn btn-primary">Create Product</button>
                    </div>
                </form>
                <div id="admin-products" class="admin-list">
                    <div class="loading">Loading products...</div>
                </div>
            </div>
        </div>
    </section>

    <script src="/js/api.js"></script>
    <script src="/js/auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="/js/admin.js"></script>
</body>
</html>
